{{ 'component-multicolumn.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign color_scheme = section.settings.color_scheme
-%}

<section
  class="section multicolumn color-scheme-{{ color_scheme }}"
  data-section-id="{{ section.id }}"
  {% render 'util-section-spacing', padding_top: section.settings.padding_top, padding_bottom: section.settings.padding_bottom %}
>
  <div class="page-width">
    {%- if section.settings.heading != blank -%}
      <div class="section__header text-center">
        <h2 class="section__title" {% render 'util-animation', animation: 'fade-up' %}>{{ section.settings.heading }}</h2>
        {%- if section.settings.subtitle != blank -%}
          <p class="section__subtitle" {% render 'util-animation', animation: 'fade-up', index: 2 %}>{{ section.settings.subtitle }}</p>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="grid grid--{{ section.settings.columns }}" data-animate-stagger>
      {%- for block in section.blocks -%}
        <div class="multicolumn__item text-{{ section.settings.alignment }}" {{ block.shopify_attributes }} {% render 'util-animation', animation: 'fade-up', index: forloop.index %}>
          {%- if block.settings.image != blank -%}
            <div class="multicolumn__image">
              {%- render 'util-responsive-image',
                image: block.settings.image,
                widths: '200,300,400',
                sizes: '(min-width: 990px) 25vw, 50vw',
                loading: 'lazy'
              -%}
            </div>
          {%- elsif block.settings.icon != 'none' -%}
            <div class="multicolumn__icon">
              {%- render 'util-icon', icon: block.settings.icon, size: 32 -%}
            </div>
          {%- endif -%}
          {%- if block.settings.heading != blank -%}
            <h3 class="multicolumn__heading">{{ block.settings.heading }}</h3>
          {%- endif -%}
          {%- if block.settings.text != blank -%}
            <div class="multicolumn__text rte">{{ block.settings.text }}</div>
          {%- endif -%}
          {%- if block.settings.button_label != blank -%}
            <a href="{{ block.settings.button_link }}" class="btn btn--tertiary">{{ block.settings.button_label }}</a>
          {%- endif -%}
        </div>
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Multicolumn",
  "class": "multicolumn-section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading" },
    { "type": "text", "id": "subtitle", "label": "Subtitle" },
    {
      "type": "select", "id": "columns", "label": "Columns",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" }
      ],
      "default": "3"
    },
    {
      "type": "select", "id": "alignment", "label": "Text alignment",
      "options": [
        { "value": "start", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "center"
    },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "range", "id": "padding_top", "label": "Top padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Bottom padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" }
  ],
  "blocks": [
    {
      "type": "column",
      "name": "Column",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        {
          "type": "select", "id": "icon", "label": "Icon (if no image)",
          "options": [
            { "value": "none", "label": "None" },
            { "value": "truck", "label": "Shipping" },
            { "value": "return", "label": "Returns" },
            { "value": "lock", "label": "Secure" },
            { "value": "star", "label": "Quality" },
            { "value": "gift", "label": "Gift" },
            { "value": "heart", "label": "Heart" },
            { "value": "check", "label": "Check" }
          ],
          "default": "none"
        },
        { "type": "text", "id": "heading", "label": "Heading", "default": "Column heading" },
        { "type": "richtext", "id": "text", "label": "Text", "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post.</p>" },
        { "type": "text", "id": "button_label", "label": "Button label" },
        { "type": "url", "id": "button_link", "label": "Button link" }
      ]
    }
  ],
  "max_blocks": 8,
  "presets": [
    {
      "name": "Multicolumn",
      "blocks": [
        { "type": "column" },
        { "type": "column" },
        { "type": "column" }
      ]
    }
  ]
}
{% endschema %}
