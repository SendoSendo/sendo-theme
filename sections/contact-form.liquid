{%- liquid
  assign color_scheme = section.settings.color_scheme
-%}

<section
  class="section contact-form color-scheme-{{ color_scheme }}"
  data-section-id="{{ section.id }}"
  {% render 'util-section-spacing', padding_top: section.settings.padding_top, padding_bottom: section.settings.padding_bottom %}
>
  <div class="page-width">
    <div class="contact-form__inner">
      {%- if section.settings.heading != blank -%}
        <div class="section__header text-center">
          <h2 class="section__title" {% render 'util-animation', animation: 'fade-up' %}>{{ section.settings.heading }}</h2>
          {%- if section.settings.text != blank -%}
            <p class="section__subtitle" {% render 'util-animation', animation: 'fade-up', index: 2 %}>{{ section.settings.text }}</p>
          {%- endif -%}
        </div>
      {%- endif -%}

      {%- form 'contact', class: 'contact-form__form' -%}
        {%- if form.errors -%}
          <div class="form__message form__message--error" role="alert">
            {{ form.errors | default_errors }}
          </div>
        {%- endif -%}
        {%- if form.posted_successfully? -%}
          <div class="form__message form__message--success" role="status">
            <p>{%- render 'util-icon', icon: 'check', size: 16 -%} {{ 'general.contact.success' | t | default: "Thanks for your message! We'll get back to you shortly." }}</p>
          </div>
        {%- endif -%}

        <div class="contact-form__grid">
          <div class="field">
            <label for="ContactName" class="form__label">{{ 'general.contact.name' | t | default: 'Name' }} *</label>
            <input type="text" id="ContactName" name="contact[name]" class="field__input" required>
          </div>
          <div class="field">
            <label for="ContactEmail" class="form__label">{{ 'general.contact.email' | t | default: 'Email' }} *</label>
            <input type="email" id="ContactEmail" name="contact[email]" class="field__input" required autocomplete="email">
          </div>
        </div>
        {%- if section.settings.show_phone -%}
          <div class="field">
            <label for="ContactPhone" class="form__label">{{ 'general.contact.phone' | t | default: 'Phone' }}</label>
            <input type="tel" id="ContactPhone" name="contact[phone]" class="field__input" autocomplete="tel">
          </div>
        {%- endif -%}
        <div class="field">
          <label for="ContactMessage" class="form__label">{{ 'general.contact.message' | t | default: 'Message' }} *</label>
          <textarea id="ContactMessage" name="contact[body]" class="field__input" rows="5" required></textarea>
        </div>
        <button type="submit" class="btn btn--primary">
          {{ 'general.contact.submit' | t | default: 'Send message' }}
        </button>
      {%- endform -%}
    </div>
  </div>
</section>

<style>
  .contact-form__inner { max-width: 640px; margin: 0 auto; }
  .contact-form__form { display: flex; flex-direction: column; gap: var(--spacing-md); }
  .contact-form__grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md); }
  @media (max-width: 749px) { .contact-form__grid { grid-template-columns: 1fr; } }
</style>

{% schema %}
{
  "name": "Contact form",
  "class": "contact-form-section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Get in touch" },
    { "type": "text", "id": "text", "label": "Text" },
    { "type": "checkbox", "id": "show_phone", "label": "Show phone field", "default": false },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "range", "id": "padding_top", "label": "Top padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Bottom padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" }
  ],
  "presets": [{ "name": "Contact form" }]
}
{% endschema %}
