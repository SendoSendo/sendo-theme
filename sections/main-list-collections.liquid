{{ 'component-collection-list.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign color_scheme = section.settings.color_scheme
-%}

<section
  class="section main-list-collections color-scheme-{{ color_scheme }}"
  data-section-id="{{ section.id }}"
  {% render 'util-section-spacing', padding_top: section.settings.padding_top, padding_bottom: section.settings.padding_bottom %}
>
  <div class="page-width">
    <h1 class="section__title" {% render 'util-animation', animation: 'fade-up' %}>{{ 'general.collection.all_collections' | t | default: 'Collections' }}</h1>

    <div class="grid grid--{{ section.settings.columns }}" data-animate-stagger>
      {%- for collection in collections -%}
        <div {% render 'util-animation', animation: 'fade-up', index: forloop.index %}>
          <a href="{{ collection.url }}" class="collection-card">
            <div class="collection-card__media collection-card__media--{{ section.settings.image_ratio }}">
              {%- if collection.image -%}
                {%- render 'util-responsive-image',
                  image: collection.image,
                  widths: '300,400,600,800',
                  sizes: '(min-width: 990px) 25vw, (min-width: 750px) 33vw, 50vw',
                  loading: 'lazy'
                -%}
              {%- else -%}
                {{ 'collection-' | append: forloop.index | placeholder_svg_tag: 'placeholder-svg' }}
              {%- endif -%}
            </div>
            <div class="collection-card__info">
              <h2 class="collection-card__title">{{ collection.title }}</h2>
              {%- if section.settings.show_count -%}
                <p class="collection-card__count">{{ collection.products_count }} {{ 'general.products' | t | default: 'products' }}</p>
              {%- endif -%}
            </div>
          </a>
        </div>
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "All collections",
  "class": "main-list-collections-section",
  "settings": [
    {
      "type": "select", "id": "columns", "label": "Columns",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" }
      ],
      "default": "3"
    },
    {
      "type": "select", "id": "image_ratio", "label": "Image ratio",
      "options": [
        { "value": "square", "label": "Square" },
        { "value": "portrait", "label": "Portrait" },
        { "value": "landscape", "label": "Landscape" },
        { "value": "circle", "label": "Circle" }
      ],
      "default": "square"
    },
    { "type": "checkbox", "id": "show_count", "label": "Show product count", "default": true },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "range", "id": "padding_top", "label": "Top padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Bottom padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" }
  ]
}
{% endschema %}
