{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-badge.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign color_scheme = section.settings.color_scheme
-%}

<section
  class="section recently-viewed color-scheme-{{ color_scheme }}"
  data-section-id="{{ section.id }}"
  {% render 'util-section-spacing', padding_top: section.settings.padding_top, padding_bottom: section.settings.padding_bottom %}
  style="display: none;"
>
  <div class="page-width">
    {%- if section.settings.heading != blank -%}
      <div class="section__header text-center">
        <h2 class="section__title">{{ section.settings.heading }}</h2>
      </div>
    {%- endif -%}

    <div class="grid grid--{{ section.settings.columns }}" id="RecentlyViewed-{{ section.id }}" data-recently-viewed data-limit="{{ section.settings.products_to_show }}">
    </div>
  </div>
</section>

<script src="{{ 'component-recently-viewed.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Recently viewed",
  "class": "recently-viewed-section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Recently viewed" },
    { "type": "range", "id": "products_to_show", "label": "Products to show", "min": 2, "max": 8, "step": 1, "default": 4 },
    {
      "type": "select", "id": "columns", "label": "Columns",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" }
      ],
      "default": "4"
    },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "range", "id": "padding_top", "label": "Top padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Bottom padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" }
  ],
  "presets": [{ "name": "Recently viewed" }]
}
{% endschema %}
