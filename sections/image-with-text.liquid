{{ 'component-image-with-text.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign color_scheme = section.settings.color_scheme
  assign layout = section.settings.layout
  assign image = section.settings.image
  assign image_width = section.settings.image_width
-%}

<section
  class="section image-with-text color-scheme-{{ color_scheme }}"
  data-section-id="{{ section.id }}"
  {% render 'util-section-spacing', padding_top: section.settings.padding_top, padding_bottom: section.settings.padding_bottom %}
>
  <div class="page-width">
    <div class="image-with-text__grid image-with-text__grid--{{ layout }}{% if section.settings.mobile_text_first %} image-with-text__grid--text-first-mobile{% endif %}">
      <div class="image-with-text__media" style="--image-width: {{ image_width }}%;" {% render 'util-animation', animation: 'fade-up' %}>
        {%- if image != blank -%}
          <div class="image-with-text__image{% if section.settings.image_rounded %} image-with-text__image--rounded{% endif %}">
            {%- render 'util-responsive-image',
              image: image,
              widths: '400,600,800,1000',
              sizes: '(min-width: 750px) 50vw, 100vw',
              loading: 'lazy'
            -%}
          </div>
        {%- else -%}
          <div class="image-with-text__placeholder{% if section.settings.image_rounded %} image-with-text__image--rounded{% endif %}">
            {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
          </div>
        {%- endif -%}
      </div>

      <div class="image-with-text__content" {% render 'util-animation', animation: 'fade-up', index: 2 %}>
        {%- if section.settings.subtitle != blank -%}
          <p class="image-with-text__subtitle">{{ section.settings.subtitle }}</p>
        {%- endif -%}
        {%- if section.settings.heading != blank -%}
          <h2 class="image-with-text__heading">{{ section.settings.heading }}</h2>
        {%- endif -%}
        {%- if section.settings.text != blank -%}
          <div class="image-with-text__text rte">{{ section.settings.text }}</div>
        {%- endif -%}
        {%- if section.settings.button_label != blank -%}
          <div class="image-with-text__actions">
            <a href="{{ section.settings.button_link }}" class="btn btn--primary">{{ section.settings.button_label }}</a>
            {%- if section.settings.button_label_2 != blank -%}
              <a href="{{ section.settings.button_link_2 }}" class="btn btn--secondary">{{ section.settings.button_label_2 }}</a>
            {%- endif -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Image with text",
  "class": "image-with-text-section",
  "settings": [
    { "type": "image_picker", "id": "image", "label": "Image" },
    {
      "type": "range", "id": "image_width", "label": "Image width",
      "min": 30, "max": 70, "step": 5, "default": 50, "unit": "%"
    },
    { "type": "checkbox", "id": "image_rounded", "label": "Rounded image corners", "default": false },
    { "type": "text", "id": "subtitle", "label": "Subtitle" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Image with text" },
    { "type": "richtext", "id": "text", "label": "Text", "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post.</p>" },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "Learn more" },
    { "type": "url", "id": "button_link", "label": "Button link" },
    { "type": "text", "id": "button_label_2", "label": "Second button label" },
    { "type": "url", "id": "button_link_2", "label": "Second button link" },
    {
      "type": "select", "id": "layout", "label": "Layout",
      "options": [
        { "value": "image-first", "label": "Image first" },
        { "value": "text-first", "label": "Text first" }
      ],
      "default": "image-first"
    },
    { "type": "checkbox", "id": "mobile_text_first", "label": "Show text first on mobile", "default": false },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-2" },
    { "type": "range", "id": "padding_top", "label": "Top padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Bottom padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" }
  ],
  "presets": [{ "name": "Image with text" }]
}
{% endschema %}
