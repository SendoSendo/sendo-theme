{{ 'component-accordion.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign color_scheme = section.settings.color_scheme
-%}

<section
  class="section faq color-scheme-{{ color_scheme }}"
  data-section-id="{{ section.id }}"
  {% render 'util-section-spacing', padding_top: section.settings.padding_top, padding_bottom: section.settings.padding_bottom %}
>
  <div class="page-width">
    <div class="faq__inner">
      {%- if section.settings.heading != blank -%}
        <div class="section__header text-center">
          <h2 class="section__title" {% render 'util-animation', animation: 'fade-up' %}>{{ section.settings.heading }}</h2>
          {%- if section.settings.subtitle != blank -%}
            <p class="section__subtitle" {% render 'util-animation', animation: 'fade-up', index: 2 %}>{{ section.settings.subtitle }}</p>
          {%- endif -%}
        </div>
      {%- endif -%}

      <div class="faq__list accordion" data-animate-stagger>
        {%- for block in section.blocks -%}
          <details class="accordion__item" {{ block.shopify_attributes }} {% render 'util-animation', animation: 'fade-up', index: forloop.index %}>
            <summary class="accordion__trigger">
              <span>{{ block.settings.question }}</span>
              {%- render 'util-icon', icon: 'plus', size: 16 -%}
            </summary>
            <div class="accordion__content">
              <div class="rte">{{ block.settings.answer }}</div>
            </div>
          </details>
        {%- endfor -%}
      </div>
    </div>
  </div>
</section>

{%- comment -%} FAQ Schema.org structured data {%- endcomment -%}
{%- if section.blocks.size > 0 -%}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {%- for block in section.blocks -%}
          {
            "@type": "Question",
            "name": {{ block.settings.question | json }},
            "acceptedAnswer": {
              "@type": "Answer",
              "text": {{ block.settings.answer | strip_html | json }}
            }
          }{%- unless forloop.last -%},{%- endunless -%}
        {%- endfor -%}
      ]
    }
  </script>
{%- endif -%}

{% schema %}
{
  "name": "FAQ",
  "class": "faq-section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Frequently asked questions" },
    { "type": "text", "id": "subtitle", "label": "Subtitle" },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "range", "id": "padding_top", "label": "Top padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Bottom padding", "min": 0, "max": 100, "step": 4, "default": 40, "unit": "px" }
  ],
  "blocks": [
    {
      "type": "question",
      "name": "Question",
      "settings": [
        { "type": "text", "id": "question", "label": "Question", "default": "What is your return policy?" },
        { "type": "richtext", "id": "answer", "label": "Answer", "default": "<p>We offer a 30-day return policy on all items.</p>" }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "FAQ",
      "blocks": [
        { "type": "question", "settings": { "question": "What is your return policy?", "answer": "<p>We offer a 30-day return policy on all items. Items must be unused and in original packaging.</p>" } },
        { "type": "question", "settings": { "question": "How long does shipping take?", "answer": "<p>Standard shipping takes 5-7 business days. Express shipping is available at checkout.</p>" } },
        { "type": "question", "settings": { "question": "Do you ship internationally?", "answer": "<p>Yes, we ship to most countries worldwide. Shipping rates and times vary by destination.</p>" } }
      ]
    }
  ]
}
{% endschema %}
